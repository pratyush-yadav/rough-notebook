{% extends "base1.html" %}

{% block main %}
{% comment %} <form action="" method="POST" onsubmit="validateForm()"> {% endcomment %}
<form action="" method="POST" onsubmit="if (password1.value===password2.value){return true} else{alert('passwords do not match'); return false;}">
    {% csrf_token %}
    <h1>Set new password</h1>
    {% comment %} <input type="text" placeholder="Set username" title="Set a new username" autofocus autocomplete="new-password" required id="username" name="username"> {% endcomment %}
        <!-- autocomplete="new-password" is used to disable suggestions -->
    <div class="password-wrapper">
        <input type="password" placeholder="Set password" title="Enter new password"
        autocomplete="off" minlength="5" maxlength="20" autofocus required name="password1" id="password1">
        <span class="eye slash" onclick="togglePasswordVisibility(this)"></span>
    </div>
    <div class="password-wrapper">
        <input type="password" placeholder="Confirm password" title="Re-enter new password"
        autocomplete="off" minlength="5" maxlength="20" required name="password2" id="password2">
        <span class="eye slash" onclick="togglePasswordVisibility(this)"></span>
    </div>
    <button type="submit">Continue</button>
</form>

<div>
    <hr>
    <p>
        Already have an account?
        <a href="/">Log in</a>
    </p>
</div>

<script type="text/javascript">
    function togglePasswordVisibility(element){
        element.classList.toggle("slash")
        p = element.previousElementSibling
        p.setAttribute("type", p.getAttribute("type")==="text" ? "password" : "text")
    }

    function validateForm(){
        if (password1 !== password2){
            e.preventdefault()
        }
    }
</script>
{% endblock main %}

{% comment %} <div class="popup">
    <p>Check your inbox for instructions to verify the email address and set password.</p>
</div> {% endcomment %}
